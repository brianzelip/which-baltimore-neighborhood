(function() {
  const data = {
    type: 'FeatureCollection',
    features: [
      {
        type: 'Feature',
        properties: {
          acres: '46.7104316029',
          shape_area: '2034706.40062',
          label: 'Abell',
          shape_leng: '5892.82777754',
          nbrdesc: 'ABELL',
          color_2: '2'
        },
        geometry: {
          type: 'MultiPolygon',
          coordinates: [
            [
              [
                [-76.61113021264933, 39.32343829965781],
                [-76.61167182075991, 39.32342545317174],
                [-76.61219164871255, 39.32340167737693],
                [-76.61241426694825, 39.32339070915425],
                [-76.6126492904304, 39.323379128350005],
                [-76.6127481489348, 39.32337425768202],
                [-76.61320840399523, 39.32335856349929],
                [-76.61324695083864, 39.323888968709284],
                [-76.61328103449621, 39.324376840998305],
                [-76.61329833395845, 39.32463098436392],
                [-76.61331166737024, 39.32480599993532],
                [-76.61332836011924, 39.3250251254909],
                [-76.6133544416925, 39.32542257104887],
                [-76.6133747068281, 39.325755040712046],
                [-76.61338767135811, 39.32593184569077],
                [-76.61339600093392, 39.32610600071865],
                [-76.61340582753225, 39.32631147163638],
                [-76.61341419940955, 39.32647171649756],
                [-76.61342697763641, 39.32671655356927],
                [-76.61344455991933, 39.32702623429525],
                [-76.6134597723198, 39.32720094513829],
                [-76.61348780264323, 39.327522877939714],
                [-76.61350240350504, 39.32778661864494],
                [-76.6135220303609, 39.32814153892228],
                [-76.61352879302498, 39.32832495648008],
                [-76.6128348238981, 39.328349925766716],
                [-76.61218340981281, 39.32838034129068],
                [-76.61162913506607, 39.32839803585529],
                [-76.61123423214453, 39.328416368528664],
                [-76.61108900028205, 39.328405999657676],
                [-76.6107364002135, 39.328433295264084],
                [-76.61066777980498, 39.32843581708082],
                [-76.6102605280342, 39.32845077821117],
                [-76.60969707181765, 39.32847637693575],
                [-76.60943533970395, 39.32849105358769],
                [-76.60942980400628, 39.32831167790705],
                [-76.60942598715376, 39.32798177191411],
                [-76.60941729826642, 39.32722025623513],
                [-76.60941702690555, 39.32719646202042],
                [-76.60941374541432, 39.32703549968518],
                [-76.60941050266423, 39.32680224596426],
                [-76.60940929600196, 39.32671560239657],
                [-76.60940670808826, 39.326412118428486],
                [-76.60940608704772, 39.32613201994383],
                [-76.60940596153765, 39.32607585774097],
                [-76.60940678717812, 39.32579883289147],
                [-76.60940962971254, 39.325561157702445],
                [-76.60940988784574, 39.325539563066336],
                [-76.60940997200555, 39.32538197343383],
                [-76.60941355031159, 39.32511936157612],
                [-76.60941623218031, 39.32478179074604],
                [-76.60941704534042, 39.32435017978602],
                [-76.60942257790198, 39.32406142643989],
                [-76.6094256559672, 39.32390076341392],
                [-76.60942765187782, 39.32379654504898],
                [-76.60943254334217, 39.323588159038316],
                [-76.60943675155697, 39.323408854196074],
                [-76.60955763062171, 39.32344322043878],
                [-76.61000678409661, 39.32344750308809],
                [-76.61060144147106, 39.32345595475556],
                [-76.61113021264933, 39.32343829965781]
              ]
            ]
          ]
        }
      },
      {
        type: 'Feature',
        properties: {
          acres: '145.743210001',
          shape_area: '6348574.22763',
          label: 'Bolton Hill',
          shape_leng: '11003.0889007',
          nbrdesc: 'BOLTON HILL',
          color_2: '4'
        },
        geometry: {
          type: 'MultiPolygon',
          coordinates: [
            [
              [
                [-76.62490985734607, 39.31090656391056],
                [-76.6241102842453, 39.31094514913919],
                [-76.62372301341657, 39.310963836201914],
                [-76.62343957138198, 39.310967977895835],
                [-76.62340495037954, 39.31096848396606],
                [-76.62311001898176, 39.310972795217644],
                [-76.62298557053202, 39.310903334304136],
                [-76.62288222974702, 39.310840243573104],
                [-76.62280392045488, 39.31079243422512],
                [-76.62256726305347, 39.31064795002765],
                [-76.62207064872634, 39.31036071215558],
                [-76.62164152049942, 39.31012616469974],
                [-76.62155708184879, 39.31008001287515],
                [-76.6211117905136, 39.30981285723487],
                [-76.62074716445638, 39.30961140726165],
                [-76.62045082250616, 39.30941775295857],
                [-76.62014917621636, 39.30923625264199],
                [-76.62019846514269, 39.309135262622476],
                [-76.62020719080904, 39.30911718385525],
                [-76.62028729842274, 39.308951239997015],
                [-76.62046303836443, 39.30858719034889],
                [-76.62053288792384, 39.308449887795554],
                [-76.62059435774685, 39.30832905726584],
                [-76.62075588058595, 39.307982815979706],
                [-76.62085867725416, 39.30776246004255],
                [-76.62090438296289, 39.30763797364267],
                [-76.62093504471572, 39.307554465380115],
                [-76.62095498408159, 39.307471985411375],
                [-76.62096663676577, 39.307423789368414],
                [-76.62098903158554, 39.3073311477865],
                [-76.62100105460719, 39.307229048144826],
                [-76.62101567678228, 39.307104872167535],
                [-76.62101472581745, 39.30687774638755],
                [-76.62099284243844, 39.30671590737416],
                [-76.62096413916113, 39.30646494093303],
                [-76.62092245929934, 39.306150280722555],
                [-76.62092091576716, 39.306138628975624],
                [-76.62092140262851, 39.305939952722596],
                [-76.62088937191076, 39.30566890122979],
                [-76.62078721519694, 39.30480457216803],
                [-76.62078553583785, 39.304790360928884],
                [-76.62076479942861, 39.30440600004059],
                [-76.62076135532824, 39.30434216316373],
                [-76.62097349660397, 39.30433850782592],
                [-76.62116121500432, 39.30433204317377],
                [-76.62124794024332, 39.30432905661549],
                [-76.62139629574001, 39.30432346633926],
                [-76.62153601773815, 39.30431820116434],
                [-76.62192789307495, 39.30429033047698],
                [-76.62207005438303, 39.30427961843929],
                [-76.62247074778242, 39.30423452212775],
                [-76.62286640546243, 39.304167827979285],
                [-76.62296014236469, 39.30414828515179],
                [-76.62315770698586, 39.304107096844554],
                [-76.62331152357011, 39.304063344029636],
                [-76.62349564479831, 39.30401883330479],
                [-76.62367634213531, 39.30397540844643],
                [-76.62383715094457, 39.303930682002566],
                [-76.62399189789609, 39.30388274005853],
                [-76.62417566090248, 39.30381639279918],
                [-76.62425321644254, 39.30378307326627],
                [-76.62437467883915, 39.30371655167159],
                [-76.62440854548382, 39.303698003475645],
                [-76.62454592703627, 39.30359602659045],
                [-76.62458985780738, 39.30356178780492],
                [-76.62466368378374, 39.30350424466447],
                [-76.6247230061909, 39.303458005581476],
                [-76.62509120710425, 39.303171012030425],
                [-76.6251591133649, 39.30330963344826],
                [-76.62530105793643, 39.30345973688613],
                [-76.6254422115985, 39.303577940954966],
                [-76.62554034886749, 39.30366013156111],
                [-76.6257623462599, 39.30384189166384],
                [-76.6259414859025, 39.303992121764374],
                [-76.62600801226101, 39.304047919169314],
                [-76.62623626178575, 39.30423573240987],
                [-76.62647335815505, 39.304419697364786],
                [-76.62666195679802, 39.30458932174475],
                [-76.62687645688827, 39.30476523516935],
                [-76.62694127107079, 39.304809576187054],
                [-76.62708650421317, 39.30492515285422],
                [-76.62722232989051, 39.30503817107072],
                [-76.62737312221749, 39.30516521721347],
                [-76.62753342449128, 39.30528875513463],
                [-76.62769206821095, 39.305421786941245],
                [-76.62787306703696, 39.30557056066667],
                [-76.62790287820792, 39.30559506374013],
                [-76.62811812563193, 39.30577090963498],
                [-76.62838050946215, 39.305988356058236],
                [-76.62844240345991, 39.306039648925896],
                [-76.62870398900631, 39.30624872946864],
                [-76.62878823439065, 39.306326057938364],
                [-76.62887754009418, 39.306395562156226],
                [-76.62897832641691, 39.3064817431026],
                [-76.6290574353326, 39.306548572167245],
                [-76.62920326058921, 39.30666599905558],
                [-76.62938926160433, 39.306823459522796],
                [-76.62963525027726, 39.30701276039947],
                [-76.62970429003285, 39.30706371299986],
                [-76.62976844433948, 39.307111487615785],
                [-76.63007739669466, 39.30737034312176],
                [-76.63030884578193, 39.3075619234212],
                [-76.63049263990442, 39.30771682960817],
                [-76.63072728295175, 39.30791558910576],
                [-76.6312936279804, 39.30837473729208],
                [-76.63157037288644, 39.30860039216208],
                [-76.63168354089842, 39.30869902642825],
                [-76.63198030266636, 39.3089417600897],
                [-76.63231766240477, 39.30921911259143],
                [-76.63263854356059, 39.30949741781975],
                [-76.63296436815335, 39.309753702437796],
                [-76.63326793267437, 39.31000844662654],
                [-76.63346743814374, 39.31014066471337],
                [-76.63365629765266, 39.31022690722019],
                [-76.63380811524372, 39.31033333698335],
                [-76.63404004261156, 39.31047335294972],
                [-76.63384674896717, 39.31046575917399],
                [-76.63358619715181, 39.31048401508571],
                [-76.63313746912485, 39.3105068696359],
                [-76.63246204706888, 39.31054126661739],
                [-76.63228440173054, 39.31055788193293],
                [-76.63177981286846, 39.31057509972217],
                [-76.63121842584755, 39.3105984937307],
                [-76.63010082132942, 39.31064230578037],
                [-76.62979365733209, 39.31065693504817],
                [-76.62898642630073, 39.31069537708734],
                [-76.62834604744202, 39.31072558517786],
                [-76.6279858298525, 39.31074081476421],
                [-76.62767209603957, 39.31073894200107],
                [-76.6273548216793, 39.31075262760436],
                [-76.62695305514453, 39.31077601279986],
                [-76.62653866187244, 39.31079488785425],
                [-76.62636093092812, 39.31080733156441],
                [-76.6262681755916, 39.31081382558581],
                [-76.6261153889395, 39.310824526029386],
                [-76.62562928928146, 39.31084794010236],
                [-76.62534044468427, 39.31085644412968],
                [-76.62512358766743, 39.31086282705121],
                [-76.6250827241471, 39.31087118989346],
                [-76.62490985734607, 39.31090656391056]
              ]
            ]
          ]
        }
      }
    ]
  };
  const point = [-76.62394894614718, 39.28682415080091];
  const polygon = data.features[0].geometry.coordinates[0][0];

  // XHR setup via
  // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onload#Example

  let NEIGHBORHOODS;
  console.log('1', typeof NEIGHBORHOODS);
  const xhr = new XMLHttpRequest();
  const method = 'GET';
  const url = 'https://data.baltimorecity.gov/resource/h3fx-54q3.geojson';

  xhr.open(method, url, false);

  xhr.onload = function() {
    NEIGHBORHOODS = JSON.parse(this.responseText);
    console.log('2', typeof NEIGHBORHOODS);
    const contains = d3.polygonContains(polygon, point);
    console.log('THE BIG QUESTION:::::', contains);
  };

  xhr.send();
  console.log('3', typeof NEIGHBORHOODS);

  const lat = document.getElementById('lat');
  const long = document.getElementById('long');

  if (!navigator.geolocation) {
    alert('FUCK! NO GEO YO!');
    return;
  } else {
    function geo_success(position) {
      lat.innerHTML = position.coords.latitude;
      long.innerHTML = position.coords.longitude;
      console.log('position is: ', position);
    }

    function geo_error() {
      alert('Sorry, no position available.');
    }

    var geo_options = {
      enableHighAccuracy: true
    };

    navigator.geolocation.getCurrentPosition(
      geo_success,
      geo_error,
      geo_options
    );
  }
})();
